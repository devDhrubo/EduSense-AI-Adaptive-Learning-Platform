```env
# VOICE-BASED LEARNING ASSISTANT ENVIRONMENT SETUP

# ============================================
# REQUIRED CONFIGURATION
# ============================================

# Gemini API Key - Get from https://ai.google.dev/
# 1. Go to Google AI Studio: https://ai.google.dev/
# 2. Click "Get API key"
# 3. Create a new API key
# 4. Copy and paste below

API_KEY=AIzaSyDWGRqbKlKaZJ0agH0FglsfB1s2z4sHmqg
VITE_GEMINI_API_KEY=AIzaSyDWGRqbKlKaZJ0agH0FglsfB1s2z4sHmqg
VITE_API_KEY=AIzaSyDWGRqbKlKaZJ0agH0FglsfB1s2z4sHmqg

# Note: For browser-based features (AI Recommendations, etc.), use VITE_ prefix
# The API_KEY without prefix is for server-side usage

# ============================================
# OPTIONAL CONFIGURATION
# ============================================

# Voice Assistant Settings (Optional - defaults are fine)
# VOICE_MAX_NOTES=100                    # Maximum number of voice notes to store
# VOICE_AUTO_CLEAR=0                     # Auto-clear notes after (minutes, 0 = disabled)
# VOICE_LANGUAGE=en-US                   # Default language for recognition
# VOICE_AUTO_PLAY_RESPONSES=true         # Auto-play AI responses

# ============================================
# DEVELOPMENT ENVIRONMENT
# ============================================

# Set to development for detailed logging
NODE_ENV=development

# ============================================
# PRODUCTION ENVIRONMENT
# ============================================

# Uncomment for production deployment
# NODE_ENV=production
# API_KEY=your_prod_gemini_api_key

# ============================================
# DEBUGGING (Optional)
# ============================================

# Uncomment to enable voice service debugging
# DEBUG_VOICE_SERVICE=true
# DEBUG_VOICE_RECOGNITION=true
# DEBUG_VOICE_SYNTHESIS=true
```

# Setup Instructions

## 1. Create Environment File

Create `.env` file in the root directory of your project:

```bash
cd d:\Project\edusense-ai
# Create .env file
echo API_KEY=your_api_key_here > .env
```

Or create the file manually in VS Code:
1. Right-click on project root
2. New File
3. Name it `.env`
4. Add the content below

## 2. Get Your Gemini API Key

### Step 1: Visit Google AI Studio
- Go to: https://ai.google.dev/
- Click "Get API key" button

### Step 2: Create API Key
- Click "Create API key"
- Select your Google Cloud project (or create new)
- Copy the generated API key

### Step 3: Add to .env File
```env
API_KEY=AIzaSyD...your_actual_key_here...
```

## 3. Verify Setup

### Check Environment Variable is Set
```bash
# Windows PowerShell
$env:API_KEY

# Or in Node.js:
console.log(process.env.API_KEY)
```

### Test Voice Service
```tsx
import voiceService from './services/voiceService';

// Check if available
console.log('Voice available:', voiceService.isAvailable());

// Test API call
try {
  const response = await voiceService.processVoiceCommand('Hello');
  console.log('API works:', response);
} catch (error) {
  console.error('API error:', error);
}
```

## 4. Browser Setup

### Enable Microphone Access
1. Chrome/Edge: Allow microphone access when prompted
2. Firefox: Allow microphone access when prompted
3. Safari: System Preferences → Security & Privacy → Microphone

### HTTPS Requirement
- **Production**: Requires HTTPS
- **Development**: Works on localhost with HTTP
- **Testing**: Can use `ngrok` or similar for HTTPS tunneling

## 5. API Key Best Practices

### Never Commit .env File
Add to `.gitignore`:
```
.env
.env.local
.env.*.local
```

### Rotate Keys Regularly
- Change API key every 3 months
- Monitor usage for unusual activity
- Delete unused keys

### Limit API Key Permissions
- Set API restrictions in Google Cloud Console
- Only enable Generative Language API
- Set usage quotas

### Environment-Specific Keys
```
.env.development   # Local development key
.env.staging       # Staging key
.env.production    # Production key (most restricted)
```

## 6. Troubleshooting

### "API_KEY is undefined"
```
✗ Check .env file exists
✗ Check API_KEY= is set
✗ Verify no spaces or special characters
✓ Restart dev server after creating .env
```

### "Speech Recognition not available"
```
✗ Check browser compatibility
✗ Ensure HTTPS connection (or localhost)
✗ Allow microphone permissions
✗ Update browser to latest version
```

### "API Error: INVALID_API_KEY"
```
✗ Check API key is correct
✗ Verify API key has no typos
✗ Ensure Generative Language API is enabled
✗ Check API quota not exceeded
✓ Try generating a new API key
```

### "Microphone Permission Denied"
```
✗ Check browser permissions
✗ Check OS microphone settings
✗ Restart browser
✓ Reset site permissions
```

## 7. Development Server

### Start Development Server
```bash
npm run dev
```

The app should be available at `http://localhost:5173` (or similar)

### Verify Components Load
1. Open browser console
2. Test voice service:
```javascript
// Check if voice service is available
console.log(window.voiceService?.isAvailable());
```

## 8. Configuration Options

### Voice Recognition Settings
```typescript
// In voiceService.ts - adjust if needed
this.recognition.continuous = true;        // Keep listening
this.recognition.interimResults = true;    // Show partial results
this.recognition.lang = "en-US";          // Language
```

### Speech Synthesis Settings
```typescript
// In VoiceBasedLearningAssistant.tsx
synthesizeSpeech({
  text: 'Your text',
  rate: 0.95,    // Speed: 0.5 - 2.0
  pitch: 1,      // Pitch: 0.5 - 2.0
  volume: 1      // Volume: 0 - 1
})
```

### Component Props
```tsx
<VoiceBasedLearningAssistant
  isActive={true}              // Enable/disable
  context="lesson"             // Learning context
  subject="Mathematics"        // Subject being learned
  onCommandExecuted={callback} // Command handler
/>
```

## 9. API Usage Monitoring

### Check API Usage
1. Go to: https://console.cloud.google.com/
2. Select your project
3. Go to: APIs & Services → Quotas
4. Monitor generative-ai.googleapis.com usage

### Set Usage Alerts
1. In Cloud Console
2. Billing → Budgets and alerts
3. Set quota alerts for your API key

## 10. Security Checklist

- [ ] API key in .env file
- [ ] .env in .gitignore
- [ ] No API key in source code
- [ ] HTTPS enabled in production
- [ ] Microphone permissions configured
- [ ] API usage monitored
- [ ] Error handling implemented
- [ ] Fallback UI for unsupported browsers

## 11. Production Deployment

### Before Going Live
1. Generate production API key
2. Set API_KEY in production environment
3. Enable HTTPS
4. Test all voice features
5. Monitor error rates
6. Set up analytics

### Deploy Environment Variables
```bash
# Heroku
heroku config:set API_KEY=your_prod_key

# Vercel
vercel env add API_KEY

# AWS
aws secretsmanager create-secret --name api-key --secret-string your_prod_key

# Azure
az keyvault secret set --vault-name myKeyVault --name api-key --value your_prod_key
```

### Monitor Production
- Error tracking: Sentry, LogRocket
- Performance: Datadog, New Relic
- API usage: Google Cloud Console
- User feedback: Support tickets, analytics

## 12. Testing

### Manual Testing Checklist
- [ ] Voice recognition works
- [ ] Speech synthesis works
- [ ] API requests process
- [ ] Notes save correctly
- [ ] Error messages display
- [ ] Works on mobile
- [ ] Works in different browsers
- [ ] Microphone access prompts appear

### Automated Testing
```typescript
// See VOICE_IMPLEMENTATION_GUIDE.md for test examples
```

## 13. Troubleshooting Guide

### Common Issues

**Issue: "API_KEY is undefined"**
- Solution: Check .env file exists and is set correctly
- Restart dev server
- Verify no spaces in API key

**Issue: "Microphone not found"**
- Solution: Check browser permissions
- Check OS microphone settings
- Try different browser
- Restart computer if needed

**Issue: "Speech Recognition not working"**
- Solution: Update browser
- Use Chrome/Edge for best support
- Check HTTPS/localhost requirement
- Clear browser cache

**Issue: "API responses are slow"**
- Solution: Check internet connection
- Verify API quota not exceeded
- Check Gemini API status
- Try different region if available

**Issue: "Voice notes not saving"**
- Solution: Check browser storage quota
- Clear browser cache
- Try different browser
- Check for JavaScript errors in console

## 14. Support Resources

- **Gemini API Docs**: https://ai.google.dev/docs
- **Web Speech API**: https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API
- **Google Cloud Console**: https://console.cloud.google.com/
- **Project Documentation**: See VOICE_LEARNING_GUIDE.md

## 15. Quick Reference

```bash
# Start development server
npm run dev

# Build for production
npm run build

# Preview production build
npm run preview

# Check API key
echo $env:API_KEY  # PowerShell
echo $API_KEY      # Bash
```

## Next Steps

1. ✅ Create .env file
2. ✅ Get Gemini API key
3. ✅ Set API_KEY environment variable
4. ✅ Start dev server
5. ✅ Test voice features
6. ✅ Integrate components into your app
7. ✅ Deploy to production

---

**Questions?** Refer to VOICE_LEARNING_GUIDE.md or VOICE_IMPLEMENTATION_GUIDE.md
